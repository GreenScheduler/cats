<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; CATS 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/fonts.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon-32x32.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Use with Schedulers" href="use-with-schedulers.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CATS
            <img src="_static/cats_dalle_img_200x200px_for_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#displaying-carbon-footprint-estimates">Displaying carbon footprint estimates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="use-with-schedulers.html">Use with Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli-reference.html">Command-line (CLI) reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<span id="id1"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline"></a></h1>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline"></a></h2>
<p>You can run CATS with:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><em>A basic command to run CATS when a job duration and postcode
are provided.</em></span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>cats<span class="w"> </span>-d<span class="w"> </span>&lt;job_duration&gt;<span class="w"> </span>--loc<span class="w"> </span>&lt;postcode&gt;
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">postcode</span></code> is optional, and can be pulled from the <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> file
or, if that is not present, inferred using the server IP address.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">job_duration</span></code> is in minutes, specified as an integer.</p>
<p>The scheduler then calls a function that estimates the best time to start
the job given predicted carbon intensity over the next 48 hours. The
workflow is the same as for other popular schedulers. Switching to CATS
should be transparent to cluster users.</p>
<p>It will display the time to start the job on standard out and optionally
some information about the carbon intensity on standard error.</p>
</section>
<section id="displaying-carbon-footprint-estimates">
<h2>Displaying carbon footprint estimates<a class="headerlink" href="#displaying-carbon-footprint-estimates" title="Permalink to this headline"></a></h2>
<p>Optionally, CATS will soon be able to provide an estimate for the
carbon footprint reduction resulting from delaying your job. To enable
the footprint estimation, you must provide information about the
machine in the form of a YAML configuration file. An example is
given below:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><em>An example provision of machine information by YAML file
to enable estimation of the carbon footprint reduction.</em></span><a class="headerlink" href="#id3" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">## ~~~ TO BE EDITED TO BE TAILORED TO THE CLUSTER ~~~</span>
<span class="c1">##</span>
<span class="c1">## Settings for fictive CW23</span>
<span class="c1">##</span>
<span class="c1">## Updated: 04/05/2023</span>

<span class="nn">---</span>
<span class="nt">cluster_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CW23&quot;</span>
<span class="nt">postcode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EH8</span><span class="nv"> </span><span class="s">9BT&quot;</span>
<span class="nt">PUE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.20</span><span class="w"> </span><span class="c1"># &gt; 1</span>
<span class="nt">partitions</span><span class="p">:</span>
<span class="w">  </span><span class="nt">CPU_partition</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CPU</span><span class="w"> </span><span class="c1"># CPU or GPU</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xeon</span><span class="nv"> </span><span class="s">Gold</span><span class="nv"> </span><span class="s">6142&quot;</span>
<span class="w">    </span><span class="nt">TDP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9.4</span><span class="w"> </span><span class="c1"># in W, per core</span>
<span class="w">  </span><span class="nt">GPU_partition</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GPU</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NVIDIA</span><span class="nv"> </span><span class="s">A100-SXM-80GB</span><span class="nv"> </span><span class="s">GPUs&quot;</span>
<span class="w">    </span><span class="nt">TDP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"> </span><span class="c1"># from https://www.nvidia.com/content/dam/en-zz/Solutions/Data-Center/a100/pdf/PB-10577-001_v02.pdf</span>
<span class="w">    </span><span class="nt">CPU_model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AMD</span><span class="nv"> </span><span class="s">EPYC</span><span class="nv"> </span><span class="s">7763&quot;</span>
<span class="w">    </span><span class="nt">TDP_CPU</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.4</span><span class="w"> </span><span class="c1"># from https://www.amd.com/fr/products/cpu/amd-epyc-7763</span>
</pre></div>
</div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option to specify a path to the configuration file,
relative to the current directory. If no path is specified, CATS looks for a
file named <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> in the current directory.</p>
<p>Additionally, to obtain carbon footprints, job-specific information
must be provided to CATS through the <code class="docutils literal notranslate"><span class="pre">--jobinfo</span></code> option. The example
below demonstrates running CATS with footprint estimation for a job using
8GB of memory, 2 CPU cores and no GPU:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><em>An example run command showing provision of job information.</em></span><a class="headerlink" href="#id4" title="Permalink to this code"></a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cats<span class="w"> </span>-d<span class="w"> </span><span class="m">120</span><span class="w"> </span>--config<span class="w"> </span>.config/config.yml<span class="w"> </span>--jobinfo<span class="w"> </span><span class="nv">cpus</span><span class="o">=</span><span class="m">2</span>,gpus<span class="o">=</span><span class="m">0</span>,memory<span class="o">=</span><span class="m">8</span>,partition<span class="o">=</span>CPU_partition
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="use-with-schedulers.html" class="btn btn-neutral float-right" title="Use with Schedulers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Colin Sauze, Andrew Walker, Loïc Lannelongue, Thibault Lestang, Tony Greenberg, Lincoln Colling, Adam Ward, Abhishek Dasgupta, Carlos Martinez and Sadie Bartholomew.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>